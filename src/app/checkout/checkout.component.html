<div class="checkout-container">
  <h1>Checkout Process</h1>

  <div class="steps">
    <div class="step" [class.active]="step >= 1">Review</div>
    <div class="step" [class.active]="step >= 2">Payment</div>
    <div class="step" [class.active]="step >= 3">Confirmation</div>
    <div class="step" [class.active]="success">Success</div>
  </div>

  <div *ngIf="step === 1">
    <h2>Step 1: Review Your Order</h2>

    <div *ngIf="cart">
      <p><strong>Order ID:</strong> {{ orderId }}</p>
      <div class="cart-items-review">
        <div class="review-item" *ngFor="let item of cart.products">
          <img [src]="item.thumbnail" class="thumbnail" alt="{{ item.title }}">
          <div class="details">
            <h4>{{ item.title }}</h4>
            <p>Qty: {{ item.quantity }}</p>
            <p>Price: ${{ item.price }}</p>
            <p>Total: ${{ (item.price * item.quantity).toFixed(2) }}</p>
          </div>
        </div>
      </div>

      <div class="summary">
        <p><strong>Subtotal:</strong> ${{ cart.total.toFixed(2) }}</p>
        <p><strong>Discount:</strong> - ${{ (cart.total - cart.discountedTotal).toFixed(2) }}</p>
        <p><strong>Delivery:</strong> $15.00</p>
        <p><strong>Final Total:</strong> ${{ (cart.discountedTotal + 15).toFixed(2) }}</p>
      </div>
    </div>

    <button (click)="nextStep()">Continue to Payment</button>
  </div>

  <div *ngIf="step === 2">
    <h2>Step 2: Payment Information</h2>
    <form class="payment-form">
      <input type="text" placeholder="Cardholder Name" [(ngModel)]="paymentDetails.name" name="name" required>
      <input type="text" placeholder="Card Number" [(ngModel)]="paymentDetails.cardNumber" name="cardNumber" required>
      <input type="text" placeholder="Expiry Date (MM/YY)" [(ngModel)]="paymentDetails.expiry" name="expiry" required>
      <input type="text" placeholder="CVV" [(ngModel)]="paymentDetails.cvv" name="cvv" required>
    </form>
    <button (click)="nextStep()">Continue to Confirmation</button>
  </div>

  <div *ngIf="step === 3">
    <h2>Step 3: Confirming Your Order...</h2>
    <p>Please wait while we confirm your purchase.</p>
    <button (click)="nextStep()">Finish</button>
  </div>

  <div *ngIf="success" class="success-message">
    <i class="fa fa-check-circle"></i>
    <h2>Checkout Successful!</h2>
    <p>Thank you for your purchase. Redirecting to home...</p>
  </div>
</div>
