<div class="container py-4">
  <div class="row mt-2">
    <h2 class="headphones-title">Products For You!</h2>
  </div>

  <div class="row g-4">
    @for (product of visibleProducts; track $index) {
      <div class="col-sm-6 col-md-4 col-lg-3">
        <div class="card product-card h-100 border-0 shadow" (click)="productDetail(product.id)">
          <div class="position-relative">
            <img [src]="product.thumbnail" alt="{{ product.title }}" class="card-img-top" />
            <i
              class="fas"
              [ngClass]="{
                'fa-heart': product.liked,
                'fa-heart-broken': !product.liked
              }"
              (click)="toggleLike(product); $event.stopPropagation()"
              class="like-icon"
              title="Like"
            ></i>
          </div>
          <div class="card-body d-flex flex-column">
            <h5 class="card-title fw-semibold">{{ product.title }}</h5>
            <p class="card-text small text-muted">{{ product.description }}</p>
            <p class="text-capitalize mb-1"><strong>Type:</strong> {{ product.headphoneType }}</p>
            <p class="mb-1"><strong>Rating:</strong> ‚≠ê {{ product.rating }} / 5</p>
            <div class="mt-auto d-flex justify-content-between align-items-center">
              <span class="badge bg-secondary text-capitalize">{{ product.category }}</span>
              <span class="fw-bold text-success">${{ product.price }}</span>
            </div>
          </div>
        </div>
      </div>
    }
  </div>

  <div class="row mt-4 text-center">
    <div class="col">
      <button *ngIf="visibleCount < filteredProducts.length" class="btn btn-outline-primary" (click)="seeMore()">
        See More
      </button>
      <button *ngIf="visibleCount >= filteredProducts.length && filteredProducts.length > 8" class="btn btn-outline-danger" (click)="seeLess()">
        See Less
      </button>
    </div>
  </div>
</div>

